<% layout('/layouts/boilerplate') %> 
    <div id="map" class="w-100 mb-3" style="height:500px;"></div>
    <h1>All campgrounds are here</h1>
    <a class = "btn btn-primary mb-2" href="/campgrounds/new">Add new place here</a>
    <ul>
        <% 
            for(let c of campgrounds)
            {
                %>
                <div class="card mb-3">
                    <div class="d-flex" >
                        <div class="col-md-4" >
                            <%
                                if(c.image.length>0)
                                {
                                    %>
                                        <img src="<%=c.image[0].url%>" class="img-fluid img-thumbnail w-100" style="height:200px;" alt="">
                                    <%
                                }
                                else
                                {
                                    %>
                                        <img src="https://res.cloudinary.com/dotr7u5kq/image/upload/v1656400142/YelpCamp/default_cs2hvk.png" style="height:200px;" class="img-fluid img-thumbnail w-100" alt="">
                                    <%
                                }
                            %>
                            
                        </div>
                        <div class="col-mg-8">
                            <div class="card-body">
                                <h5 class="card-title"><%=c.title%></h5>    
                                <p class="card-text"><%=c.description%></p>
                                <p class="card-text">
                                    <small class="text-muted"><%=c.location%></small>
                                    </p>
                                <a href="/campgrounds/<%=c._id%>" class="btn btn-primary">View details</a>
                            </div>    
                        </div>
                    </div>
                </div>
                <%
            }
            %> 
    </ul>

    <script>
            const mapToken = '<%- process.env.MAPBOX_TOKEN %>'
            const campgrounds = {features:<%- JSON.stringify(campgrounds) %>}
    </script>
    <script src="/javascripts/clusterMap.js"></script>